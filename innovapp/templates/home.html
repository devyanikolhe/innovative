{% extends 'base.html'%}
{% load static %}
{% block body %}
<div class="hero"></div>
<div class="space1"></div>

<div class="slider">
  <div class="slides">
    <img src="{% static 'img/oil.jpg' %}" alt="Slide 1">
    <img src="{% static 'img/wash.jpg' %}" alt="Slide 2">
    <img src="{% static 'img/repair.jpg' %}" alt="Slide 3">
    <img src="{% static 'img/tyre.jpg' %}" alt="Slide 4">
    <img src="{% static 'img/battery.jpg' %}" alt="Slide 5">
  </div>
</div>

<style>
/* Base slider container */
.slider {
  width: 100%;
  overflow: hidden;
  background-color: black;
}

/* Slides wrapper */
.slides {
  display: flex;
  transition: transform 0.5s ease-in-out;
  box-sizing: border-box;
}

/* Individual images */
.slides img {
  flex: 0 0 calc(100% / 3); /* Default desktop: 3 per row */
  width: calc(100% / 3);
  height: 300px;
  object-fit: cover;
  padding: 10px;
  box-sizing: border-box;
  min-width: 0; /* Prevent flex overflow */
}

/* Tablet view */
@media (max-width: 1024px) {
  .slides img {
    flex: 0 0 calc(100% / 2);
    width: calc(100% / 2);
    height: 250px;
  }
}

/* Mobile view */
@media (max-width: 600px) {
  .slides img {
    flex: 0 0 100%;
    width: 100%;
    height: 220px;
    padding: 5px;
  }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const slides = document.querySelector('.slides');
  const totalSlides = slides.children.length;

  function getVisibleSlides() {
    if (window.innerWidth <= 600) return 1;
    if (window.innerWidth <= 1024) return 2;
    return 3;
  }

  let visibleSlides = getVisibleSlides();
  let index = 0;

  function updateSlidePosition() {
    slides.style.transform = `translateX(-${index * (100 / visibleSlides)}%)`;
  }

  function showNextSlide() {
    visibleSlides = getVisibleSlides();
    index++;
    if (index > totalSlides - visibleSlides) index = 0;
    updateSlidePosition();
  }

  // Auto-slide every 3s
  setInterval(showNextSlide, 3000);

  // Recalculate on resize
  window.addEventListener("resize", () => {
    visibleSlides = getVisibleSlides();
    index = 0;
    updateSlidePosition();
  });

  // Initial positioning
  updateSlidePosition();
});
</script>

<div class="space2"></div>
{% endblock %}
